<% col_class = 'col-md-4' %>

<% form_tag '/organisations/results', :method => 'get', :id => 'results-form' do %>

  <div class="row">

    <div class="<%=col_class%>"> 
      <div style="position: relative; top: 4px">
        <%= hidden_field_tag :organisation_id, :id => 'organisation_id' %>
        <script>
          $(function () {
            $('#organisation_id').lookup({
              lookup_url: '/organisations/results',
              placeholder: '<%=I18n.t(:filter_by_name).capitalize%>',
              rtype: 'organisation'
            }).on('change', function () {
              $('#results-form').submit();
            });
          });
        </script>
      </div>
    </div>


    <div class="<%=col_class%>"> 
      <div style="position: relative; top: 4px">
        <%= hidden_field_tag :sector_id, :id => 'sector_id', :value => params[:sector_id] %>
        <script>
          $(function () {
            $('#sector_id').lookup({
              lookup_url: '/organisations/results',
              placeholder: '<%=I18n.t(:filter_by_sector).capitalize%>',
              rtype: 'sector',
            }).on('change', function () {
              $('#results-form').submit();
            });
          });
        </script>  
      </div>
    </div>
    
    <div class="<%=col_class%>">
      <div style="text-align: right" >      
        <i style="margin-right: 4px" title="Sort by" class="fa fa-sort"></i>
        <%= select_tag :o, :class => 'form-control input-sm', :style => 'display: inline; width: auto', :options => {'Last updated' => :date, 'Name' => :name}, :selected => (defined?(o) ? o : :date) %>                      
      </div>
    </div>    

  </div>

<% end %>  

<i id="filter-spin" style="display:none" class="fa fa-spin fa-spinner"></i>
<div id="results" class="page-container" style="margin-top: 10px"></div>
