{"name":"Lumen","tagline":"Open-source group discussion platform. Written in Ruby (Padrino), hosted via Heroku (web) and Virtualmin (email)","body":"# Lumen\r\n\r\nLumen started life as a group discussion platform akin to [Google Groups](http://groups.google.com), [GroupServer](http://groupserver.org/), \r\n[Mailman](http://www.list.org/) or [Sympa](http://www.sympa.org/). Since then, it's gained some powerful extras. An outline of its features:\r\n\r\n* Open-source (under [Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported](http://creativecommons.org/licenses/by-nc-sa/3.0/))\r\n* Self-hosted using Heroku (for the web interface, free in initial case), Amazon S3 (for file attachments, typically free or a few pennies/cents per month) and Virtualmin (for the mail sever, requires a low-end VPS at a cost of around £20/$40 per year)\r\n* Designed for custom domains (group email addresses of the form yourgroup@yourdomain.org)\r\n* Sends and receives mail via regular SMTP and IMAP accounts on Virtualmin\r\n* Dual web/email access\r\n* Extensible member profiles\r\n* Flexible digest engine\r\n* Events calendar\r\n* Daily summaries of news stories tweeted by group members via news.me integration\r\n* Geographically-aware lists feature for maintaining lists of venues, contacts etc\r\n\r\nLumen is written in Ruby using the [Padrino](http://padrinorb.com/) framework.\r\n\r\n[<img src=\"http://wordsandwriting.github.io/lumen/images/top.jpg\">](http://wordsandwriting.github.io/lumen/images/top.jpg)\r\n\r\nSee below for more images.\r\n\r\n## Getting up and running\r\n\r\n### 1. Register a domain\r\n\r\nWe'll add the DNS records shortly.\r\n\r\n### 2. Push code to Heroku\r\n\r\n```\r\ngit clone https://github.com/wordsandwriting/lumen.git\r\ncd lumen\r\nheroku create yourappname\r\ngit push heroku master\r\nheroku addons:add mongohq\r\nheroku addons:add memcachier\r\nheroku addons:add papertrail\r\nheroku addons:add scheduler\r\nheroku config:set HEROKU_APP_NAME=yourappname\r\nheroku config:set HEROKU_API_KEY=yourapikey\r\n```\r\n\r\n(You can find your Heroku API key at [http://dashboard.heroku.com/account](http://dashboard.heroku.com/account).)\r\n\r\n###  3. Set up Virtualmin\r\n\r\nPurchase a VPS (check out [http://lowendbox.com/](http://lowendbox.com/), 512mb RAM should do) and follow [this guide](http://lowendbox.com/blog/your-own-mail-server-with-virtualmin/) to set up Virtualmin. \r\nYou probably don't need ClamAV or SpamAssassin, and so you can untick Spam and Virus filtering from the 'Features and Plugins' screen.\r\n\r\nCreate an email address no-reply@yourdomain.org with the same password as the Virtualmin user.\r\n\r\n### 4. Set DNS\r\n\r\nSupposing the IP of your VPS is 11.22.33.44:\r\n\r\n* Point www. to Heroku `www.yourdomain.org CNAME yourappname.herokuapp.com`\r\n* Naked domain redirect via [wwwizer.com](http://wwwizer.com) `yourdomain.org A 174.129.25.170` \r\n* For mail delivery `yourdomain.org MX mail.yourdomain.org` and `mail.yourdomain.org A 11.22.33.44`\r\n* SPF `yourdomain.org TXT \"v=spf1 a mx a:yourdomain.org ip4:11.22.33.44 ?all\"`\r\n* DKIM: Visit Email Messages > DomainKeys Identified Mail in Virtualmin. Set 'Reject incoming email with invalid DKIM signature?' to 'No' and enter yourdomain.org to 'Additional domains to sign for'. Then add the record under 'DNS records for additional domains'.\r\n\r\n### 5. Configuration\r\n\r\nVisit www.yourdomain.org and complete the configuration (don't forget your S3 details).\r\n\r\nYou can find an example notification script (VIRTUALMIN_NOTIFICATION_SCRIPT) in `/notify`. Visit http://www.yourdomain.org/admin/index/Account and click 'Edit' to\r\nfind your secret token.\r\n\r\n### 6. Rake tasks\r\n\r\n```\r\nheroku run rake mi:create_indexes\r\nheroku addons:open scheduler\r\n```\r\n\r\nAdd the following tasks to the scheduler:\r\n```\r\nrake news:update 7am\r\nrake digests:daily 7.30am\r\nrake digests:weekly 11pm (only runs on Sunday)\r\nrake cleanup 4am\r\n```\r\n\r\n## Switching mail servers\r\n\r\nIf you switch your mail server, you'll need to re-setup the group mail accounts on the new server. Fire up a console (`heroku run bash; padrino c`) and run:\r\n```\r\nGroup.all.each { |g| g.setup_mail_accounts_and_forwarder }\r\nConversationPost.all.each { |c| c.update_attribute(:mid, nil) }\r\n```\r\n\r\n## Gallery\r\n\r\n### Homepage (amalgamates newsfeeds from all groups)\r\n[<img src=\"http://wordsandwriting.github.io/lumen/images/home.jpg\">](http://wordsandwriting.github.io/lumen/images/home.jpg)\r\n\r\n### Home calendar (amalgamates events from all groups)\r\n[<img src=\"http://wordsandwriting.github.io/lumen/images/calendar.jpg\">](http://wordsandwriting.github.io/lumen/images/calendar.jpg)\r\n\r\n### A group\r\n[<img src=\"http://wordsandwriting.github.io/lumen/images/group.jpg\">](http://wordsandwriting.github.io/lumen/images/group.jpg)\r\n\r\n### A group digest\r\n[<img src=\"http://wordsandwriting.github.io/lumen/images/digest.jpg\">](http://wordsandwriting.github.io/lumen/images/digest.jpg)\r\n\r\n### A group's map\r\n[<img src=\"http://wordsandwriting.github.io/lumen/images/map.jpg\">](http://wordsandwriting.github.io/lumen/images/map.jpg)\r\n\r\n### A list\r\n[<img src=\"http://wordsandwriting.github.io/lumen/images/list.jpg\">](http://wordsandwriting.github.io/lumen/images/list.jpg)\r\n\r\n### A profile \r\n[<img src=\"http://wordsandwriting.github.io/lumen/images/profile.jpg\">](http://wordsandwriting.github.io/lumen/images/profile.jpg)\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}